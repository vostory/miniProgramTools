<view class="scientific-page" data-theme="{{theme}}">
  <view class="custom-nav">
    <button class="back-btn" bindtap="goBack">‚Üê</button>
    <!-- <text class="nav-title">ÁßëÂ≠¶ËÆ°ÁÆóÂô®</text> -->
    <button class="home-btn" bindtap="goHome">üè†</button>
  </view>

  <!-- ÊòæÁ§∫Âå∫Âüü -->
  <view class="display-area card">
    <!-- ËæìÂÖ•Ë°®ËææÂºèÊòæÁ§∫ -->
    <view class="input-display">
      <text class="expression-text">{{expression || ''}}</text>
    </view>
    
    <!-- ËÆ°ÁÆóÁªìÊûúÊòæÁ§∫ -->
    <view class="result-display">
      <text class="result-text">{{result || '0'}}</text>
    </view>
    
    <!-- ÂéÜÂè≤ËÆ∞ÂΩïÊòæÁ§∫ -->
    <view class="history-display" wx:if="{{history}}">
      <text class="history-text">{{history}}</text>
    </view>
  </view>
  
  <!-- Ê®°ÂºèÈÄâÊã©Âô® -->
  <view class="mode-selector">
    <view class="mode-buttons">
      <button 
        class="mode-btn {{mode === 'basic' ? 'active' : ''}}" 
        bindtap="setMode" 
        data-mode="basic"
      >
        Âü∫Á°Ä
      </button>
      <button 
        class="mode-btn {{mode === 'scientific' ? 'active' : ''}}" 
        bindtap="setMode" 
        data-mode="scientific"
      >
        ÁßëÂ≠¶
      </button>
      <button 
        class="mode-btn {{mode === 'programmer' ? 'active' : ''}}" 
        bindtap="setMode" 
        data-mode="programmer"
      >
        Á®ãÂ∫èÂëò
      </button>
    </view>
  </view>
  
  <!-- ËßíÂ∫¶Ê®°ÂºèÊòæÁ§∫ -->
  <view class="angle-indicator" wx:if="{{mode === 'basic' || mode === 'scientific'}}">
    <text>ËßíÂ∫¶Ê®°Âºè: {{angleMode === 'deg' ? 'Â∫¶(¬∞)' : 'ÂºßÂ∫¶(rad)'}}</text>
  </view>
  
  <!-- Âü∫Á°ÄÊ®°ÂºèÈîÆÁõò -->
  <view class="keypad-area" wx:if="{{mode === 'basic'}}">
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="clearAll">C</button>
      <button class="keypad-btn function-btn" bindtap="deleteLast">‚å´</button>
      <button class="keypad-btn function-btn" bindtap="inputParenthesis" data-paren="(">(</button>
      <button class="keypad-btn function-btn" bindtap="inputParenthesis" data-paren=")">)</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="√∑">√∑</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="sin">sin</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="7">7</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="8">8</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="9">9</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="√ó">√ó</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="cos">cos</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="4">4</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="5">5</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="6">6</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="-">-</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="tan">tan</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="1">1</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="2">2</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="3">3</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="+">+</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="inputConstant" data-const="œÄ">œÄ</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="0">0</button>
      <button class="keypad-btn number-btn" bindtap="inputDecimal">.</button>
      <button class="keypad-btn function-btn" bindtap="inputPower">^</button>
      <button class="keypad-btn equals-btn" bindtap="calculate">=</button>
    </view>
  </view>
  
  <!-- ÁßëÂ≠¶Ê®°ÂºèÈîÆÁõò -->
  <view class="keypad-area" wx:if="{{mode === 'scientific'}}">
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="clearAll">C</button>
      <button class="keypad-btn function-btn" bindtap="deleteLast">‚å´</button>
      <button class="keypad-btn function-btn" bindtap="inputParenthesis" data-paren="(">(</button>
      <button class="keypad-btn function-btn" bindtap="inputParenthesis" data-paren=")">)</button>
      <button class="keypad-btn function-btn" bindtap="inputFactorial">!</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="sin">sin</button>
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="cos">cos</button>
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="tan">tan</button>
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="asin">asin</button>
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="acos">acos</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="atan">atan</button>
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="log">log</button>
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="ln">ln</button>
      <button class="keypad-btn function-btn" bindtap="inputFunction" data-func="sqrt">‚àö</button>
      <button class="keypad-btn function-btn" bindtap="inputPower">^</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="7">7</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="8">8</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="9">9</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="√∑">√∑</button>
      <button class="keypad-btn function-btn" bindtap="toggleAngleMode">
        {{angleMode === 'deg' ? 'DEG' : 'RAD'}}
      </button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="4">4</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="5">5</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="6">6</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="√ó">√ó</button>
      <button class="keypad-btn function-btn" bindtap="toggleSign">+/-</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="1">1</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="2">2</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="3">3</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="-">-</button>
      <button class="keypad-btn equals-btn" bindtap="calculate">=</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="inputConstant" data-const="œÄ">œÄ</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="0">0</button>
      <button class="keypad-btn number-btn" bindtap="inputDecimal">.</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="+">+</button>
      <button class="keypad-btn function-btn" bindtap="showHistory">ÂéÜÂè≤</button>
    </view>
  </view>
  
  <!-- Á®ãÂ∫èÂëòÊ®°ÂºèÈîÆÁõò -->
  <view class="keypad-area" wx:if="{{mode === 'programmer'}}">
    <view class="system-indicator">
      <text>ÂΩìÂâçËøõÂà∂: {{systemNames[numberSystem]}} {{bits > 0 ? '(' + bits + '‰Ωç)' : ''}}</text>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="clearAll">C</button>
      <button class="keypad-btn function-btn" bindtap="deleteLast">‚å´</button>
      <button class="keypad-btn function-btn" bindtap="inputHex" data-hex="A">A</button>
      <button class="keypad-btn function-btn" bindtap="inputHex" data-hex="B">B</button>
      <button class="keypad-btn function-btn" bindtap="inputHex" data-hex="C">C</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="inputHex" data-hex="D">D</button>
      <button class="keypad-btn function-btn" bindtap="inputHex" data-hex="E">E</button>
      <button class="keypad-btn function-btn" bindtap="inputHex" data-hex="F">F</button>
      <button class="keypad-btn function-btn" bindtap="setNumberSystem" data-system="hex">HEX</button>
      <button class="keypad-btn function-btn" bindtap="setNumberSystem" data-system="dec">DEC</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="7">7</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="8">8</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="9">9</button>
      <button class="keypad-btn function-btn" bindtap="setNumberSystem" data-system="oct">OCT</button>
      <button class="keypad-btn function-btn" bindtap="setNumberSystem" data-system="bin">BIN</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="4">4</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="5">5</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="6">6</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="√∑">√∑</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="√ó">√ó</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="1">1</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="2">2</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="3">3</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="-">-</button>
      <button class="keypad-btn function-btn" bindtap="toggleBits" data-bits="8">8‰Ωç</button>
    </view>
    
    <view class="keypad-row">
      <button class="keypad-btn function-btn" bindtap="toggleSign">+/-</button>
      <button class="keypad-btn number-btn" bindtap="inputNumber" data-num="0">0</button>
      <button class="keypad-btn number-btn" bindtap="inputDecimal">.</button>
      <button class="keypad-btn operator-btn" bindtap="inputOperator" data-op="+">+</button>
      <button class="keypad-btn equals-btn" bindtap="calculate">=</button>
    </view>
  </view>
</view>